\section{Parking Lot Model}
\label{sec-model}

In order for parking events to be useful, they must be incorporated into a
model allowing us to predict parking lot availability. Our goal is to respond
to queries with the probability that a given parking has a space available,
information that can be used in several ways to determine what lots to search
and in what order. In this section, we present the design of the PocketParker
parking lot availability estimator. PocketParker's estimator uses the events
produced by our parking event detector both to estimate the rates at which
drivers are searching and departing from the lot and to adjust the
availability probability directly.

\subsection{Estimator Overview}

For each lot $l$, PocketParker maintains a time-varying probability that the
lot has $n$ free spots $P_l(t, X = n)$. While we are mainly interested in the
probability that the lot has a space available $P_l(t, X > 0)$, we maintain
separate probabilities for each number of free spots so that we can
manipulate individual probabilities in response to events and queries as
described below. We bound the count above and below, and briefly describe in
Section~\ref{subsec-capacity} how to estimate lot capacity.

PocketParker's estimator receives two types of events: arrivals and
departures. As described in Section~\ref{sec-detector}, a portion of the
arrivals are also annotated with searches. However, for the unannotated
arrivals, searches may have taken place. Section~\ref{subsec-synthetic}
describeshow PocketParker uses the annotated arrivals to estimate search
behavior for unannotated arrivals. Section~\ref{subsec-online} further
describes how we incorporate each kind of information into our availability
model.

Between events we want to maintain our availability model by estimating the
rate at which departures and searches are taking place. PocketParker must use
the events it can detect to estimate the rate at which events are taking
place in the lot, which includes the effect of drivers not using
PocketParker, which we call \textit{hidden drivers}. Accomplishing this
requires that we estimate the ratio between monitored and hidden drivers, and
we describe an approach to doing so in Section~\ref{subsec-hidden}. With an
estimate of the hidden driver ratio, we can scale the search and departure
rates according, described in Section~\ref{subsec-rates}.

\subsection{Estimating Lot Capacity}

\subsection{Implicity Searches}
\label{subsec-synthetic}

\subsection{Online Updates}
\label{subsec-online}

Each arrival and departure received represent strong positive information:
moments when PocketParker knows either that a spot just existed (arrival) or
now exists (departure). Unsuccessful searches, in contrast, represent weaker
negative information, either because they may not have actually been observed
by PocketParker (unannotated) or so may not have actually taken place, or
because they may not have been thorough (annotated).

\subsection{Hidden Driver Estimation}
\label{subsec-hidden}

Maintaining an accurate count requires estimating the
percentage of drivers using the lot that are monitored by PocketParker, which
we discuss next.

\subsection{Rate Estimation}
\label{subsec-rates}
